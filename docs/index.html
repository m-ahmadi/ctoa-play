<!DOCTYPE html>
<html lang="en-GB">
<head>
	<title>cTrader OpenAPI Playground</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no, maximum-scale=1.0" />
	<link rel="icon" type="image/x-icon" href="favicon.ico" />
	<link rel="stylesheet" href="lib/prism.min.css" />
	<link rel="stylesheet" href="index.css" />
</head>
<body>
<div id="_controlSection">

<div id="_optsSectionContainer" style="
	border: 1px solid black;">
	
	<div class="optg" style="display: flex;">
		<div style="flex: 1 1 auto">
			<button id="_cred" onclick="changeCredentials()">Credentials</button><button id="_credForget" onclick="forgetCredentials()" class="tinybtn">Forget</button>
		</div>
		<div style="flex: 1 1 auto">
			<button id="_conn" onclick="establishConnection()">Connect</button><label id="_connAutoContainer"><input id="_connAuto" type="checkbox" onchange="updateAutoState(this)" class="chkbx2" />auto</label>
		</div>
		<div style="flex: 1 1 auto">
			<button id="_appAuth" onclick="authApplication()">Auth App</button><label id="_appAuthAutoContainer"><input id="_appAuthAuto" type="checkbox" onchange="updateAutoState(this)" class="chkbx2" />auto</label>
		</div>
	</div>
	
	<div class="optg" style="display:flex;">
		<label id="_connKeepContainer" style="flex: 1 1 24%;">
			<input id="_connKeep" type="checkbox" onchange="updateAutoState(this)" class="chkbx" />Heartbeat me up&emsp;
		</label>
		<div style="flex: 3 2 auto; display: flex;">
			<div id="_connKeepFlashTarget1" class="boxy" style="flex: 1 2 auto;">Client</div>
			<div id="_connKeepFlashTarget2" class="boxy" style="flex: 1 2 auto;">Server 
				<small><small><span id="_hbtimer"></span></small></small>
			</div>
		</div>
	</div>
	
	<div class="optg" style="display: flex;">
		<span style="flex: 1 1 auto;">Account: </span>
		<div style="flex: 1 1 auto;" >
			<select id="_acc" onchange="changeAccount(+this.selectedOptions[0].value)"></select>
			<span id="_accLockContainer">
				<input id="_accLock" type="checkbox" class="chkbx3" onchange="updateAutoState(this);" disabled /><label id="_accLockIcon" for="_accLock">
					<svg viewBox="0 0 24 24" style="width:15px;height:15px;stroke:currentColor;fill:none;stroke-width:2;vertical-align:sub;">
						<path d="M12 11V7a4 4 0 118 0"></path><rect x="5" y="11" width="14" height="10" rx="2" ry="2"></rect>
					</svg>
				</label>
			</span>
		</div>
		<div style="flex: 1 1 auto;">
			<button id="_accLoad" onclick="loadAccounts()" class="tinybtn">Load</button><label id="_accLoadAutoContainer"><input id="_accLoadAuto" type="checkbox" onchange="updateAutoState(this)" class="chkbx2" /><span id="_accLoadAutoText">auto</span></label>
		</div>
		<div style="flex: 1 1 auto;">
			<button id="_accAuth" onclick="authAccount()" class="tinybtn">Auth</button><label id="_accAuthAutoContainer"><input id="_accAuthAuto" type="checkbox" onchange="updateAutoState(this)" class="chkbx2" />auto</label>
		</div>
	</div>
	
	<div class="optg" style="display: flex;">
		<span style="flex: 1 1 auto;" >Symbol:</span>
		<div style="flex: 1 1 auto;" >
			<select id="_sym" onchange="changeSymbol(+this.selectedOptions[0].value)"></select>
			<span id="_symLockContainer">
				<input id="_symLock" type="checkbox" class="chkbx3" onchange="updateAutoState(this);" disabled /><label id="_symLockIcon" for="_symLock">
					<svg viewBox="0 0 24 24" style="width:15px;height:15px;stroke:currentColor;fill:none;stroke-width:2;vertical-align:sub;">
						<path d="M12 11V7a4 4 0 118 0"></path><rect x="5" y="11" width="14" height="10" rx="2" ry="2"></rect>
					</svg>
				</label>
			</span>
		</div>
		<div style="flex: 1 1 auto;" >
			<button id="_symLoad" onclick="loadSymbols()" class="tinybtn">Load</button><label id="_symLoadAutoContainer"><input id="_symLoadAuto" type="checkbox" onchange="updateAutoState(this)" class="chkbx2" /><span id="_symLoadAutoText">auto</span></label>
		</div>
	</div>
	
	<div class="optg" style="display: flex;">
		<span id="_tsSectionLabel" style="flex: 1 1 auto;">Timestamp:</span>
		<span id="_tsFromContainer" style="flex: 1 1 auto;">from:
			<input id="_tsFromVal" type="number" min="1" value="1" class="tiny" style="width:40px;" oninput="changeTimestamps(this)" /><select id="_tsFromUnit" class="tiny">
				<option value="sec">sec</option>
				<option value="min">min</option>
				<option value="day" selected>day</option>
			</select>ago
		</span>
		<span id="_tsLockContainer" style="flex: 1 1 auto;">
			<input id="_tsLock" type="checkbox" class="chkbx2" onchange="updateAutoState(this)" /><label id="_tsLockIcon" for="_tsLock">
				<svg viewBox="0 0 24 24" style="width:15px;height:15px;stroke:currentColor;fill:none;stroke-width:2;vertical-align:sub;">
					<path d="M12 11V7a4 4 0 118 0"></path><rect x="5" y="11" width="14" height="10" rx="2" ry="2"></rect>
				</svg>
			</label>
		</span>
		<span id="_tsToContainer" style="flex: 1 1 auto;">to:
			<input id="_tsToVal" type="number" min="0" value="0" class="tiny" style="width:40px;" oninput="changeTimestamps(this)" /><select id="_tsToUnit" class="tiny">
				<option value="sec">sec</option>
				<option value="min">min</option>
				<option value="day" selected>day</option>
			</select>ago
		</span>
	</div>
	
	<div class="optg" style="background:khaki; display:flex;" >
		<b style="flex: 1 1 auto;">Message:</b>
		<div style="flex: 1 1 auto;">
			<select id="_msgs" onchange="setupMsg(this.selectedOptions[0].value)"></select>
			<button id="_send" onclick="sendMessage()">Send</button>
		</div>
		<div id="_msgFiltersContainer" style="margin-left: auto;">
			<label id="_msgsFilter2WayContainer"><input id="_msgsFilter2Way" type="checkbox" onchange="changeMessage(this)" class="chkbx2" />👉👈</label>
			<label id="_msgsFilter1WayContainer"><input id="_msgsFilter1Way" type="checkbox" onchange="changeMessage(this)" class="chkbx2" />👉</label>
		</div>
		
	</div>
	
</div>


<div id="_eventsSectionContainer" style="
	border: 1px solid teal;
">
	<div id="_evtsBanner" style="
		background: #e5e2a6;
		border-bottom: 1px solid black;
		text-align: center;
		padding-bottom: 3px;
		display: flex;
	">
		<input id="_evtAllSwitch" type="checkbox" style="margin:0; margin-right: auto;" onchange="toggleAllEvents(this.checked)" />
		<strong style="flex: 1 1 auto;">🔔Events</strong>
	</div>
	<div id="_evts" style="font-size: x-small;"></div>
</div>

<div id="_msg" style="
	display: grid;
	grid-template-columns: auto auto auto auto;
	
	border: 1px solid lightgrey;
	border-radius: 5px;
	margin-top: 5px;
	padding: 4px;
"></div>

</div>

<div id="_resSectionContainer">
	<pre id="_resPre" style="margin: 0;"
		data-prismjs-copy-timeout="500"
		data-label="clrbtn"
	><code id="_res" class="language-json code"></code></pre>
</div>
<template id="clrbtn"><button style="margin-right: 3px;" onclick="
	_res.innerHTML='';
	this.innerText='Cleared!';
	setTimeout(()=>this.innerText='Clear',500);
">Clear</button></template>


<dialog id="_dialog">
	<p id="_dialogMsg">Greetings, one and all!</p>
	<form method="dialog">
		<button>OK</button>
	</form>
</dialog>


<dialog id="_credsDialog" closedby="none" style="width:35%;">
	<form method="dialog">
		<div style="displaY:grid; grid-template-columns: 1fr 9fr; grid-row-gap: 25px;">
			<div><label for="a"><b>ClientId:</b>&emsp;</label></div>
			<div><input id="a" type="text" name="clientId"     class="chkbx4" required /></div>
			
			<div><label for="b"><b>ClientSecret:</b>&emsp;</label></div>
			<div><input id="b" type="text" name="clientSecret" class="chkbx4" required /></div>
			
			<div><label for="c"><b>AccessToken:</b>&emsp;</label></div>
			<div><input id="c" type="text" name="accessToken"  class="chkbx4" required /></div>
			
			<div><label for="d"><b>RefreshToken:</b>&emsp;</label></div>
			<div><input id="d" type="text" name="refreshToken" class="chkbx4" required /></div>
		</div>
		
		<menu>
			<label><input id="_credDialogRemember" type="checkbox" onchange="updateAutoState(this)" style="vertical-align: bottom; margin: 0px 3px 1px 0;" />Remember for future</label>
		</menu>
		
		<menu style="text-align: center;">
			<button type="button" onclick="_credsDialog.close()">❌Cancel</button>
			<button type="submit" onclick="this.value=JSON.stringify([[a,b,c,d].map(i=>i.value),_credDialogRemember.checked]);">✅Confirm</button>
		</menu>
	</form>
</dialog>


<script src="lib/prism.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/protobufjs@7.5.4/dist/light/protobuf.min.js"></script>
<!-- <script src="../node_modules/protobufjs/dist/light/protobuf.min.js"></script> -->
<script src="lib/pb.compiled.min.js"></script>
<script src="index.js"></script>
<!-- <script src="index.min.js"></script> -->
</body>
</html>
