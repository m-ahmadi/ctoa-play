<head>
	<meta charset="utf-8" />
	<link rel="stylesheet" href="lib/prism.min.css" />
	<link rel="stylesheet" href="index.css" />
	<script src="lib/prism.min.js"></script>
</head>

<div style="
	float: left;
	width: 40%;
	border: 1px solid black;">
	
	<button id="_cred" onclick="changeCredentials()">Credentials</button>
	<button id="_credForget" onclick="forgetCredentials()"><small><small>Forget</small></small></button>
	&emsp;&emsp;
	
	<button id="_conn" onclick="establishConnection()">Connect</button>
	<label><input id="_connAuto" type="checkbox" onchange="updateAutoState(this)" class="chkbx" />auto</label>
	&emsp;&emsp;
	
	<button id="_appAuth" onclick="authApplication()">Auth App</button>
	<label><input id="_appAuthAuto" type="checkbox" onchange="updateAutoState(this)" class="chkbx" />auto</label>
	<span id="_appAuthLabel"></span>
	<hr>
	
	<label style="float: left;">
		<input id="_connKeep" type="checkbox" onchange="updateAutoState(this)" class="chkbx" />heartbeat me up
	</label>
	<div id="_connKeepFlashTarget1" style="float:left; margin-left:10px;" class="boxy">Client</div>
	<div id="_connKeepFlashTarget2" style="float:left;" class="boxy">Server 
		<small><small><span id="_hbtimer"></span></small></small>
	</div>
	<hr style="clear:both;">
	
	Account: <select id="_acc" onchange="changeAccount(+this.selectedOptions[0].value)"></select>
	<button id="_accLoad" onclick="loadAccounts()" class="tiny">Load</button>
	<label><input id="_accLoadAuto" type="checkbox" onchange="updateAutoState(this)" class="chkbx" />auto</label>
	<span id="_accLoadLabel"></span>
	&emsp;&emsp;
	<button id="_accAuth" onclick="authAccount()" class="tiny">Auth</button>
	<label><input id="_accAuthAuto" type="checkbox" onchange="updateAutoState(this)" class="chkbx" />auto</label>
	<hr>
	
	Symbol: <select id="_sym" onchange="changeSymbol(+this.selectedOptions[0].value)"></select>
	<button id="_symLoad" onclick="loadSymbols()" class="tiny">Load</button>
	<label><input id="_symLoadAuto" type="checkbox" onchange="updateAutoState(this)" class="chkbx" />auto</label>
	<span id="_symLoadLabel"></span>
	<hr>
	
	Message: <select id="_msgs" onchange="setupMsg(this.selectedOptions[0].value)"></select>
	<button id="_send" onclick="sendMessage()">Send</button>
	<div style="float:right; margin-right:50px;">
		<label><input id="_msgsFilter2Way" type="checkbox" onchange="changeMessage(this)" class="chkbx2" />👉👈</label>
		<label><input id="_msgsFilter1Way" type="checkbox" onchange="changeMessage(this)" class="chkbx2" />👉</label>
	</div>
	<hr style="clear:both">
	
	Timestamp: &emsp;&emsp; from:
	<input id="_tsFromVal" type="number" min="1" value="1" class="tiny" style="width:40px;" oninput="changeTimestamps()" /><select id="_tsFromUnit" class="tiny">
		<option value="sec">sec</option>
		<option value="min">min</option>
		<option value="day" selected>day</option>
	</select>ago &emsp;&emsp;&emsp;&emsp; to:
	<input id="_tsToVal" type="number" min="0" value="0" class="tiny" style="width:40px;" oninput="changeTimestamps()" /><select id="_tsToUnit" class="tiny">
		<option value="sec">sec</option>
		<option value="min">min</option>
		<option value="day" selected>day</option>
	</select>ago
	
	
</div>


<dialog id="_dialog">
	<p id="_dialogMsg">Greetings, one and all!</p>
	<form method="dialog">
		<button>OK</button>
	</form>
</dialog>


<dialog id="_dialog2" closedby="closerequest" onclose="console.log(this.returnValue || 0)" style="width:35%;">
	<form method="dialog">
		<div style="displaY:grid; grid-template-columns: 1fr 9fr; grid-row-gap: 25px;">
			<div><label for="a"><b>ClientId:</b>&emsp;</label></div>
			<div><input id="a" type="text" name="clientId"     class="chkbx3" required /></div>
			
			<div><label for="b"><b>ClientSecret:</b>&emsp;</label></div>
			<div><input id="b" type="text" name="clientSecret" class="chkbx3" required /></div>
			
			<div><label for="c"><b>AccessToken:</b>&emsp;</label></div>
			<div><input id="c" type="text" name="accessToken"  class="chkbx3" required /></div>
			
			<div><label for="d"><b>RefreshToken:</b>&emsp;</label></div>
			<div><input id="d" type="text" name="refreshToken" class="chkbx3" required /></div>
		</div>
		
		<menu style="text-align: center;">
			<button type="button" onclick="this.value=754; _dialog2.close()">❌Cancel</button>
			<button type="submit" onclick="this.value=JSON.stringify([a,b,c,d].map(i=>i.value));">✅Confirm</button>
		</menu>
	</form>
</dialog>

<button onclick="_dialog2.showModal()">d.showModal()</button>



<div style="
	float: left;
	margin-left: 10px;
	border: 1px solid teal;
"><div style="
		border-bottom: 1px solid black;
		text-align: center;
		padding: 2px 0 5px 0;
	"><strong>🔔Events</strong></div>
<table id="_evts"></table>
</div>

<div style="
	border: 1px solid deeppink;
	float: right;
	width: 45%;
	height: 250px;
"><pre style="
	height: 100%;
">Events:<code id="_res2" class="language-json code"></code></pre></div>


<div id="_msg" style="
	clear: both;
	float: left;
	width: 54%;
	border: 1px solid blue;
	display: grid;
	grid-template-columns: auto auto auto auto;
"></div>

<!-- <textarea id="_res" cols="50" rows="30" class="language-js" style="
	resize:none;
	border: 1px solid red;
	float:right;
	width:39%;
" readonly></textarea> -->

<div style="
	border: 1px solid magenta;
	float: right;
	width: 45%;
"><pre style="height: 100%;">
<code id="_res" class="language-json code"></code></pre></div>

<script src="../node_modules/protobufjs/dist/light/protobuf.min.js"></script>
<script src="lib/pb.compiled.min.js"></script>
<script src="index.js"></script>
